<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <title>lative</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>

    <div class="pdlistCnt">
        
        <div class="pdlists clearfix">
            <div class="pdBox" data-index="0">
                <a href="#" class="js-pdImg">
                    <img src="images/assets/community-1.jpg" alt="">
                </a>
                <div class="pdBox_info">
                    <p data-price="NT$590" data-saleprice="NT$390" data-code="s1001">毛圈圈領衫</p>
                    <p data-price="NT$390" data-saleprice="" data-code="s1002">柔棉長袖襯衫</p>
                    <p data-price="NT$1290" data-saleprice="" data-code="s1003">極輕羽絨連帽外套</p>
                    <p data-price="NT$990" data-saleprice="NT$690" data-code="s1004">高腰寬版牛仔外套</p>
                    <p data-price="NT$490" data-saleprice="" data-code="s1005">棉質高簡帆布休閒鞋</p>
                </div>
            </div>

            <div class="pdBox" data-index="1">
                <a href="#" class="js-pdImg">
                    <img src="images/assets/community-2.jpg" alt="">
                </a>
                <div class="pdBox_info">
                    <p data-price="NT$390" data-saleprice="" data-code="aa2001">法蘭絨格紋襯衫</p>
                    <p data-price="NT$690" data-saleprice="" data-code="aa2002">美麗諾羊毛圓領毛衣</p>
                    <p data-price="NT$1590" data-saleprice="NT$1290" data-code="aa2003">極輕羽絨連帽外套</p>
                    <p data-price="NT$690" data-saleprice="NT$490" data-code="aa2004">毛絨長褲</p>
                    <p data-price="NT$490" data-saleprice="NT$390" data-code="aa2005">棉質高筒帆布休閒鞋</p>
                </div>
            </div>

            <div class="pdBox" data-index="2">
                <a href="#" class="js-pdImg">
                    <img src="images/assets/community-3.jpg" alt="">
                </a>
                <div class="pdBox_info">
                    <p data-price="NT$390" data-saleprice="NT$190" data-code="ac3001">羅紋條紋中高領T恤</p>
                    <p data-price="NT$1190" data-saleprice="" data-code="ac3002">極輕羽絨輕薄型圓領外套</p>
                    <p data-price="NT$790" data-saleprice="NT$390" data-code="ac3003">細肩帶連身褲</p>
                </div>
            </div>

            <div class="pdBox" data-index="3">
                <a href="#" class="js-pdImg">
                    <img src="images/assets/community-4.jpg" alt="">
                </a>
                <div class="pdBox_info">
                    <p data-price="NT$390" data-saleprice="" data-code="b4001">毛圈圈領衫</p>
                    <p data-price="NT$390" data-saleprice="" data-code="b4002">柔棉長袖襯衫</p>
                    <p data-price="NT$1290" data-saleprice="NT$1190" data-code="b4003">極輕羽絨連帽外套</p>
                    <p data-price="NT$690" data-saleprice="NT$590" data-code="b4004">高腰寬版牛仔外套</p>
                    <p data-price="NT$490" data-saleprice="NT$390" data-code="b4005">棉質高簡帆布休閒鞋</p>
                </div>
            </div>

            <div class="pdBox" data-index="4">
                <a href="#" class="js-pdImg">
                    <img src="images/assets/community-5.jpg" alt="">
                </a>
                <div class="pdBox_info">
                    <p data-price="NT$390" data-saleprice="NT$190" data-code="a5001">法蘭絨格紋襯衫</p>
                    <p data-price="NT$690" data-saleprice="NT$590" data-code="a5002">美麗諾羊毛圓領毛衣</p>
                    <p data-price="NT$1290" data-saleprice="" data-code="a5003">極輕羽絨連帽外套</p>
                    <p data-price="NT$490" data-saleprice="NT$390" data-code="a5004">毛絨長褲</p>
                    <p data-price="NT$490" data-saleprice="" data-code="a5005">棉質高筒帆布休閒鞋</p>
                </div>
            </div>

            <div class="pdBox" data-index="5">
                <a href="#" class="js-pdImg">
                    <img src="images/assets/community-6.jpg" alt="">
                </a>
                <div class="pdBox_info">
                    <p data-price="NT$390" data-saleprice="NT$190" data-code="ab6001">羅紋條紋中高領T恤</p>
                    <p data-price="NT$1190" data-saleprice="NT$1090" data-code="ab6002">極輕羽絨輕薄型圓領外套</p>
                    <p data-price="NT$790" data-saleprice="NT$590" data-code="ab6003">細肩帶連身褲</p>
                </div>
            </div>

            <div class="pdBox" data-index="6">
                <a href="#" class="js-pdImg">
                    <img src="images/assets/community-7.jpg" alt="">
                </a>
                <div class="pdBox_info">
                    <p data-price="NT$390" data-saleprice="NT$290" data-code="b7001">毛圈圈領衫</p>
                    <p data-price="NT$390" data-saleprice="NT$290" data-code="b7002">柔棉長袖襯衫</p>
                    <p data-price="NT$1290" data-saleprice="NT$1090" data-code="b7003">極輕羽絨連帽外套</p>
                    <p data-price="NT$690" data-saleprice="NT$590" data-code="b7004">高腰寬版牛仔外套</p>
                    <p data-price="NT$490" data-saleprice="" data-code="b7005">棉質高簡帆布休閒鞋</p>
                </div>
            </div>

            <div class="pdBox" data-index="7">
                <a href="#" class="js-pdImg">
                    <img src="images/assets/community-8.jpg" alt="">
                </a>
                <div class="pdBox_info">
                    <p data-price="NT$390" data-saleprice="" data-code="a8001">法蘭絨格紋襯衫</p>
                    <p data-price="NT$690" data-saleprice="NT$490" data-code="a8002">美麗諾羊毛圓領毛衣</p>
                    <p data-price="NT$1290" data-saleprice="" data-code="a8003">極輕羽絨連帽外套</p>
                    <p data-price="NT$490" data-saleprice="NT$190" data-code="a8004">毛絨長褲</p>
                    <p data-price="NT$490" data-saleprice="NT$290" data-code="a8005">棉質高筒帆布休閒鞋</p>
                </div>
            </div>

        </div>
        
        <div class="pagination">
            <button type="button" class="pagination_prev disabled">PREV < </button>
            <a href="#" class="active pagination_page">1</a>
            <a href="#" class="pagination_page">2</a>
            <a href="#" class="pagination_page">3</a>
            <a href="#" class="pagination_dots">...</a>
            <a href="#" class="pagination_page">25</a>
            <button type="button" class="pagination_next"> > NEXT</button>
        </div>
    </div>

    <!--end pdlistCnt-->

    <div class="pageCover"></div>

    <!-- popup1 -->
    <div class="popup_pdBox">
        <div class="slickWrap">
            <a href="#" class="slick_esc" data-target="popup1"></a>
            <a href="#" class="slick_prev"></a>
            <a href="#" class="slick_next"></a>
            <img src="images/assets/community-1.jpg" alt="" class="popup_pdBox_img">
            <table class="popup_pdBox_info">
                <tr class="popup_pdBox_infoPd">
                    <td class="popup_pdBox_infoPd_name">
                        <a href="#">法蘭絨格紋襯衫</a>
                    </td>
                    <td class="popup_pdBox_infoPd_price">
                        <a href="#">NT$390</a>
                    </td>
                </tr>
                <tr class="popup_pdBox_infoPd">
                    <td class="popup_pdBox_infoPd_name">
                        <a href="#">法蘭絨格紋襯衫法蘭絨格紋襯衫</a>
                    </td>
                    <td class="popup_pdBox_infoPd_price">
                        <a href="#">NT$390</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!-- popup2 -->
    <div class="popup_pdCnt">
        <div class="pdCntWrap">
            <a href="#" class="slick_esc" data-target="popup2"></a>
            <div class="pdcnt_top clearfix">
            
                <div class="pdcnt_top_left">

                </div>
                <!-- end pdcnt_top_left -->
            
                <div class="pdcnt_top_right">
                    <div class="product_inner">
                        <p class="pdcnt_tage">【限時特價】</p>
                        <p class="pdcnt_number">BA4283ＸＸ</p>
                        <h2 class="pdcnt_name">質感圓釦荷葉袖V領雪紡上衣</h2>
                        <div class="pdcnt_color">
                            <a href="#" data-color="01">
                                <img src="images/assets/color1.jpg" alt="">
                            </a>
                            <a href="#" data-color="02">
                                <img src="images/assets/color2.jpg" alt="">
                            </a>
                            <a href="#" data-color="03">
                                <img src="images/assets/color3.jpg" alt="">
                            </a>
                        </div>
                        <div class="clearfix">
                            <div class="pdcnt_size">
                                <select name="" id="" data-color="01">
                                    <option value="" data-qty="-1">SIZE</option>
                                    <option value="s" data-qty="2">S</option>
                                    <option value="m" data-qty="0">M</option>
                                    <option value="l" data-qty="0">L</option>
                                </select>
            
                                <select name="" id="" data-color="02">
                                    <option value="" data-qty="-1">SIZE</option>
                                    <option value="s" data-qty="3">S</option>
                                    <option value="m" data-qty="4">M</option>
                                    <option value="l" data-qty="5">L</option>
                                </select>
            
                                <select name="" id="" data-color="03">
                                    <option value="" data-qty="-1">SIZE</option>
                                    <option value="s" data-qty="0">S</option>
                                    <option value="m" data-qty="4">M</option>
                                    <option value="l" data-qty="5">L</option>
                                    <option value="xl" data-qty="6">XL</option>
                                </select>
            
                            </div>
            
                            <div class="pdcnt_num">
                                <select name="" id="">
                                    <option value="">QTY</option>
                                </select>
                            </div>
                        </div>
            
                        <div class="pdcnt_price">
                            <p class="pdcnt_price_original">NT.1550</p>
                            <p class="pdcnt_price_sale">NT.<span>750</span></p>
                        </div>
            
                        <div class="pdcnt_btn clearfix">
                            <a href="#" class="btn bagBtn">加入購物車</a>
                            <a href="#" class="btn soldOutBtn">已售完</a>
                            <a href="#" class="btn wishBtn"><img src="images/icons/B04.png" alt="加入我的最愛"></a>
                        </div>
            
                        <input type="hidden" name="pd_color">
                        <input type="hidden" name="pd_size">
                        <input type="hidden" name="pd_number">
            
                        <div class="pdcnt_note">
                            
                        </div>
                        
            
                    </div>
                    <!--end pdlist_inner-->
            
                </div>
                <!--end pdcnt_top_right-->
            
            </div>
            <!-- end pdcnt_top -->
            
            <div class="add_info">
                <p>本商品以加入購物車</p>
                <div class="add_info_pd">
                    <img src="images/assets/pd1.jpg" alt="">
                    <p>質感圓釦荷葉袖V領雪紡上衣</p>
                    <p>商品顏色</p>
                    <p>NT.750</p>
                </div>
                <a href="#" class="add_info_btn">前往結帳</a>
            </div>
        </div>
        <!-- end pdCntWrap -->
    </div>

    <!-- 引入js -->
    <script src="scripts/vendor/jquery-1.11.2.min.js"></script>
    <script src="scripts/vendor/jquery.magnific-popup.min.js"></script>
    <script src="scripts/vendor/slick.min.js"></script>
    <script src="scripts/main.js"></script>
    <script src="scripts/pdcnt.js"></script>
    <script>
        //一開始需要取得的資料
        var imgs=[{
            "color": "01",
            "img": "images/assets/pd1.jpg",
            "imgIdx": "1"
        }, {
            "color": "02",
            "img": "images/assets/pd2.jpg",
            "imgIdx": "1",
        }, {
            "color": "03",
            "img": "images/assets/pd3.jpg",
            "imgIdx": "1",
        }];
        
        var currentColor = "02";
        var options = {
            "mainPicWrap": ".pdcnt_imgs",
            "colorChanger": ".pdcnt_color",
            "sizeSelector": ".pdcnt_size",
            "numSelector": ".pdcnt_num",
            "initColor": currentColor
        }
    </script>
    <script>
        var popup_pdBox_index=-1;
        $(document).ready(function () {
            $(".slick_esc").click(function () {
                console.log("click");
                var target=$(this).data("target");
               $("body").removeClass(target); 
               popup_pdBox_index = -1;
            });
            
            $(".pdBox").click(function () {
                $("body").addClass("popup1"); 
                popup_pdBox_index=$(this).data("index");
                draw_popup_pdBox();
            });

            $(".slick_prev").click(function () {
                if(popup_pdBox_index == 0){
                    // 第一張
                    popup_pdBox_index = $(".pdBox").length - 1;
                }else{
                    popup_pdBox_index = popup_pdBox_index - 1;
                }
                draw_popup_pdBox();
            });

            $(".slick_next").click(function () {
                if (popup_pdBox_index == $(".pdBox").length - 1) {
                    //最後一張
                    popup_pdBox_index = 0;
                } else {
                    popup_pdBox_index = popup_pdBox_index+ 1;
                }
                draw_popup_pdBox();
            });

            $(".bagBtn").click(function () {
                $(".add_info").addClass("show");
                setTimeout(() => {
                    $(".add_info").removeClass("show");
                }, 1500);
            });

        });
        
        function draw_popup_pdBox() {
            var img = $(".pdBox").eq(popup_pdBox_index).find(".js-pdImg img").attr("src");
            $(".slickWrap img").attr("src", img);
            var tr='';
            for (let i = 0; i < $(".pdBox").eq(popup_pdBox_index).find(".pdBox_info p").length; i++) {
                var pdname = $(".pdBox").eq(popup_pdBox_index).find(".pdBox_info p").eq(i).text();
                var pdprice= $(".pdBox").eq(popup_pdBox_index).find(".pdBox_info p").eq(i).data("price");
                var pdprice2 = $(".pdBox").eq(popup_pdBox_index).find(".pdBox_info p").eq(i).data("saleprice");
                var pdcode = $(".pdBox").eq(popup_pdBox_index).find(".pdBox_info p").eq(i).data("code");
                var html="";
                if(pdprice2==""){
                    html = '<tr class="popup_pdBox_infoPd">  <td class="popup_pdBox_infoPd_name"> <a href="#" data-code="' + pdcode + '" data-price="'+ pdprice+'" data-saleprice="">' + pdname + '</a></td><td class="popup_pdBox_infoPd_price"><a href="#">' + pdprice + '</a></td></tr>';
                }else{
                    html = '<tr class="popup_pdBox_infoPd">  <td class="popup_pdBox_infoPd_name"> <a href="#" data-code="' + pdcode + '" data-price="' + pdprice +'" data-saleprice="' + pdprice2 +'">' + pdname + '</a></td><td class="popup_pdBox_infoPd_price"><a href="#">' + pdprice2 + '</a></td></tr>';
                }
                
                tr=tr+html;
            }
            $(".popup_pdBox_info").html("");
            $(".popup_pdBox_info").append(tr);

            clickEvent();
        }

        function clickEvent() {
            $(".popup_pdBox_infoPd").click(function () {
                console.log("popup2");
                $("body").addClass("popup2");

                var name=$(this).find(".popup_pdBox_infoPd_name a").text();
                var code = $(this).find(".popup_pdBox_infoPd_name a").data("code");
                var price = $(this).find(".popup_pdBox_infoPd_name a").data("price");
                var saleprice = $(this).find(".popup_pdBox_infoPd_name a").data("saleprice");
                $(".popup_pdCnt .pdcnt_name").text(name);
                $(".popup_pdCnt .pdcnt_number").text(code);
                var priceHtml="";
                if(saleprice==""){
                    $(".popup_pdCnt .pdcnt_tage").text("");
                    priceHtml='<p class="pdcnt_price_sale">'+ price+'</p>';
                }else{
                    $(".popup_pdCnt .pdcnt_tage").text("【限時特價】");
                    priceHtml = '<p class="pdcnt_price_original">' + price + '</p><p class="pdcnt_price_sale">NT.<span>'+ saleprice+'</span></p>';
                }
                $(".popup_pdCnt .pdcnt_price").html("");
                $(".popup_pdCnt .pdcnt_price").append(priceHtml);

            });
        }
    </script>
</body>

</html>